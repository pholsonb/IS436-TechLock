<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
    <title>Account Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  
    <style>
      body {
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }

      .profile-container, .tasks-container {
        background-color: #ffffff;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .profile-container {
        max-width: 900px;
        margin: 20px auto;
      }

      .tasks-container {
        max-width: 900px;
        margin: 20px auto;
      }

      h2 {
        text-align: left;
        font-size: 30px;
        margin-bottom: 20px;
        color: #333;
      }

      .profile-info {
        margin-bottom: 15px;
      }

      .table {
        margin-bottom: 0;
      }
    </style>
  </head>
  <body class="p-3 m-0 border-0 bd-example">
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
          <img src="techlocklogo.png" width="250" alt="">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item mx-3"><a class="nav-link text-white" href="index.html">Home</a></li>
            <li class="nav-item mx-3"><a class="nav-link text-white" href="TechLockEmployee.html">Employee</a></li>
            <li class="nav-item mx-3"><a class="nav-link text-white" href="TechLockContact.html">Contact Us</a></li>
            <li class="nav-item mx-3"><a class="nav-link text-white" href="TechLockAboutUs.html">About Us</a></li>
            <li class="nav-item mx-3"><a class="nav-link active text-white" href="TechLockAccount.html">Account</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <style>
      .nav-link.active {
        background-color: DarkTurquoise;
        color: white;
        border-radius: 4px;
        padding: 8px 16px;
      }
    </style>

    <!-- Profile Section -->
    <div class="profile-container">
      <h2>Profile</h2>
      <div class="profile-info">
        <strong>Name:</strong> <span id="profileName"></span>
      </div>
      <div class="profile-info">
        <strong>Email:</strong> <span id="profileEmail"></span>
      </div>
      <div class="profile-info">
        <strong>Department:</strong> <span id="profileDepartment"></span>
      </div>
      <div class="profile-info">
        <strong>Job Position:</strong> <span id="profileJobPosition"></span>
      </div>
      <div class="profile-info">
        <strong>Date Started:</strong> <span id="profileDateStarted"></span>
      </div>
    </div>

    <!-- Tasks Section -->
    <div class="tasks-container">
      <h2>Tasks</h2>
      <table class="table table-striped table-bordered" id="taskStatsTable">
        <thead>
          <tr>
            <th>Task Name</th>
            <th>Task Status %</th>
            <th>Task Description</th>
            <th>Task Deadline</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="taskList">
        </tbody>
      </table>
<br  />
<br  />

  <h3 class="mt-4">Add Task</h3>
      <form id="taskForm" class="mt-3">
        <div class="mb-3">
          <label for="task_name" class="form-label">Task Name</label>
          <input type="text" class="form-control" id="task_name" placeholder="Enter task name" required>
        </div>
        <div class="mb-3">
          <label for="task_percentage" class="form-label">Task Status %</label>
          <input type="number" class="form-control" id="task_percentage" placeholder="Enter task percentage finished" required>
        </div>
        <div class="mb-3">
          <label for="task_describe" class="form-label">Task Description</label>
          <input type="text" class="form-control" id="task_describe" placeholder="Enter task description" required>
        </div>
        <div class="mb-3">
          <label for="task_deadline" class="form-label">Task Deadline</label>
          <input type="date" class="form-control" id="task_deadline" required>
        </div>
        <button type="submit" class="btn btn-primary">Add Task</button>
      </form>
    </div>

    <script>

  window.onload = function() {
    const name = localStorage.getItem('name');
    const email = localStorage.getItem('email');
    const department = localStorage.getItem('department');
    const jobPosition = localStorage.getItem('jobposition');
    const dateStarted = localStorage.getItem('datestarted');

    // Display profile
    if (name && email && department && jobPosition && dateStarted) {
      document.getElementById('profileName').innerText = name;
      document.getElementById('profileEmail').innerText = email;
      document.getElementById('profileDepartment').innerText = department;
      document.getElementById('profileJobPosition').innerText = jobPosition;
      document.getElementById('profileDateStarted').innerText = dateStarted;
    } else {
      alert("No profile data found. Please register first.");
      window.location.href = "TechLockRegister.html"; // Redirect if no profile data
    }

    // Save profile data to localStorage for employee
    localStorage.setItem('name', document.getElementById('profileName').innerText);
    localStorage.setItem('email', document.getElementById('profileEmail').innerText);
    localStorage.setItem('department', document.getElementById('profileDepartment').innerText);
    localStorage.setItem('jobposition', document.getElementById('profileJobPosition').innerText);
    localStorage.setItem('datestarted', document.getElementById('profileDateStarted').innerText);

    updateTaskTable();
  };



      let taskData = [
        { name: "Monthly Reports", status: 50, description: "Production of reports about the project status each month", deadline: "2025-02-01" },
        { name: "Baseline Execution Index", status: 65, description: "Calculates efficiency with baseline tasks", deadline: "2024-05-02" },
        { name: "WBS Creation", status: 90, description: "Breaks down project components", deadline: "2025-09-07" },
        { name: "MSP Training Manual", status: 75, description: "Guide on Microsoft Project and company guidelines", deadline: "2025-04-07" },
      ];


      function updateTaskTable() {
  const tableBody = document.getElementById("taskList");
  tableBody.innerHTML = '';

  taskData.forEach((task, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${task.name}</td>
      <td>
        <div class="progress" style="height: 20px;">
          <div class="progress-bar" role="progressbar" style="width: ${task.status}%; background-color: ${
      task.status === 100 ? "green" : "darkturqouise"
    };" aria-valuenow="${task.status}" aria-valuemin="0" aria-valuemax="100">
            ${task.status}%
          </div>
        </div>
      </td>
      <td>${task.description}</td>
      <td>${task.deadline}</td>
      <td><button onclick="removeTask(${index})" class="btn btn-danger">Remove</button></td>
    `;
    tableBody.appendChild(row);
  });
}


      // Add a new task
      document.getElementById("taskForm").addEventListener("submit", function(event) {
        event.preventDefault();

        const taskName = document.getElementById("task_name").value;
        const taskStatus = document.getElementById("task_percentage").value;
        const taskDescription = document.getElementById("task_describe").value;
        const taskDeadline = document.getElementById("task_deadline").value;

        taskData.push({ name: taskName, status: taskStatus, description: taskDescription, deadline: taskDeadline });
        updateTaskTable();
        document.getElementById("taskForm").reset();
      });

      // Remove a task
      function removeTask(index) {
        taskData.splice(index, 1);
        updateTaskTable();
      }
    </script>
  </body>
</html>


